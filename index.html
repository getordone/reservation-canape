<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Réservation de Canapé</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f9;
        }
        .canape {
            position: relative;
            display: inline-block;
        }
        .place {
            position: absolute;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: green;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        .place.reservee {
            background-color: red;
            cursor: not-allowed;
        }
        .place:hover {
            transform: scale(1.1);
        }
    </style>
</head>
<body>
    <h1>Réservation de place sur le canapé</h1>
    <p>Clique sur une place disponible pour réserver !</p>
    <div class="canape">
        <img src="canape.jpg" alt="Canapé" style="width: 500px;">
    </div>
    <script>
        // Liste des places et positions
        const places = [
            { id: 1, top: 160, left: 120 },
            { id: 2, top: 150, left: 180 },
            { id: 3, top: 130, left: 240 },
            { id: 4, top: 140, left: 340 },
            { id: 5, top: 170, left: 395 },
        ];

        // Récupération des réservations existantes depuis localStorage
        const reservations = JSON.parse(localStorage.getItem('reservations')) || {};

        const canape = document.querySelector('.canape');

        // Fonction pour mettre à jour les réservations
        const updateReservations = () => {
            localStorage.setItem('reservations', JSON.stringify(reservations));
        };

        // Création des cercles pour chaque place
        places.forEach(place => {
            const div = document.createElement('div');
            div.className = 'place';
            div.style.top = place.top + 'px';
            div.style.left = place.left + 'px';
            div.textContent = place.id;

            // Si la place est déjà réservée, on met à jour l'affichage
            if (reservations[place.id]) {
                div.classList.add('reservee');
                div.textContent = reservations[place.id];
            }

            // Gestion du clic sur une place
            div.addEventListener('click', () => {
                if (div.classList.contains('reservee')) {
                    alert("Cette place est déjà réservée !");
                } else {
                    const nom = prompt("Entrez votre prénom pour réserver :");
                    if (nom) {
                        reservations[place.id] = nom;
                        updateReservations(); // Mise à jour de localStorage
                        div.classList.add('reservee');
                        div.textContent = nom;
                        alert(`Place ${place.id} réservée avec succès pour ${nom} !`);
                    }
                }
            });

            canape.appendChild(div);
        });
    </script>
</body>
</html>